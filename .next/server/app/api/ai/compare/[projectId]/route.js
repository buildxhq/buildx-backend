(()=>{var e={};e.id=63,e.ids=[63],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5624:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>h,routeModule:()=>u,serverHooks:()=>f,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>m});var s={};t.r(s),t.d(s,{GET:()=>d});var o=t(6559),a=t(8088),i=t(7719),n=t(2190),p=t(6010),c=t(9055);async function d(e,r){let t=r?.params?.projectId,s=e.user;if(!(0,c.H)(s.role,s.planTier,"bidComparison"))return n.NextResponse.json({message:" M-+ Upgrade to access Bid Comparison."},{status:403});try{let e=await p.db.bid.findMany({where:{projectId:t},include:{subcontractor:{select:{id:!0,name:!0,email:!0}}}});if(!e.length)return n.NextResponse.json({message:"No bids found for this project"},{status:404});let r=e.map(e=>{let r=Math.random()*(.9-.6)+.6,t=Math.floor(8*Math.random())+4;return{...e,confidenceScore:parseFloat(r.toFixed(2)),deliveryTimeWeeks:t}}).sort((e,r)=>r.confidenceScore-e.confidenceScore);return n.NextResponse.json({message:"Bid comparison complete",ranked:r})}catch(e){return n.NextResponse.json({message:"Failed to compare bids",error:e.message},{status:500})}}let u=new o.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/ai/compare/[projectId]/route",pathname:"/api/ai/compare/[projectId]",filename:"route",bundlePath:"app/api/ai/compare/[projectId]/route"},resolvedPagePath:"C:\\Users\\aande\\buildx-backend\\app\\api\\ai\\compare\\[projectId]\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:m,serverHooks:f}=u;function h(){return(0,i.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:m})}},6010:(e,r,t)=>{"use strict";t.d(r,{db:()=>o});let s=require("@prisma/client"),o=globalThis.prisma??new s.PrismaClient},6487:()=>{},8335:()=>{},9055:(e,r,t)=>{"use strict";t.d(r,{H:()=>o});let s=(e,r)=>({gc_starter:{aiTakeoffs:0,projectsPerMonth:5,aiEstimation:!1,smartProposal:!1,bidConfidence:!1},gc_growth:{aiTakeoffs:10,projectsPerMonth:10,aiEstimation:!1,smartProposal:!1,bidConfidence:!0},gc_unlimited:{aiTakeoffs:9999,projectsPerMonth:9999,aiEstimation:!0,smartProposal:!0,bidConfidence:!0},sub_verified_pro:{aiTakeoffs:0,projectsPerMonth:0,aiEstimation:!1,smartProposal:!1,bidConfidence:!1},sub_elite_partner:{aiTakeoffs:5,projectsPerMonth:0,aiEstimation:!1,smartProposal:!1,bidConfidence:!0},ae_professional:{aiTakeoffs:0,projectsPerMonth:5,aiEstimation:!1,smartProposal:!1,bidConfidence:!1},ae_enterprise:{aiTakeoffs:10,projectsPerMonth:9999,aiEstimation:!0,smartProposal:!0,bidConfidence:!0}})[`${e}_${r}`]||null;function o(e,r,t){let o=s(e,r);return!!o&&!!o[t]}},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[447,580],()=>t(5624));module.exports=s})();